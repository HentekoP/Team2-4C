<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="_editor_texture_serializer_tests_8cs" kind="file">
    <compoundname>EditorTextureSerializerTests.cs</compoundname>
    <innerclass refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests" prot="public">UniGLTF::EditorTextureSerializerTests</innerclass>
    <innernamespace refid="namespace_uni_g_l_t_f">UniGLTF</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="keyword">using</highlight><highlight class="normal"><sp/>System;</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>System.IO;</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>System.Linq;</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>NUnit.Framework;</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>UnityEditor;</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>UnityEngine;</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>VRMShaders;</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">UniGLTF</highlight></codeline>
<codeline lineno="10"><highlight class="normal">{</highlight></codeline>
<codeline lineno="11" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests" refkind="compound"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>sealed<sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests" kindref="compound">EditorTextureSerializerTests</ref></highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="13" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a0d4a33ee3e88734de30e08834365fa95" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a0d4a33ee3e88734de30e08834365fa95" kindref="member">AssetPath</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Assets/UniGLTF/Tests/UniGLTF&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="14" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1afce48a136028ab047e1ae993d40bbd91" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1afce48a136028ab047e1ae993d40bbd91" kindref="member">SrgbGrayImageName</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;4x4_gray_import_as_srgb&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="15" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ad92948acbb1b24bd65119782ae126e6b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ad92948acbb1b24bd65119782ae126e6b" kindref="member">LinearGrayImageName</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;4x4_gray_import_as_linear&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="16" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a22213bc1a940926cdf1f226db635f975" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a22213bc1a940926cdf1f226db635f975" kindref="member">NormalMapGrayImageName</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;4x4_gray_import_as_normal_map&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="17" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a998be8e79b0486cd23453daf795c3bb6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/>Texture2D<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a998be8e79b0486cd23453daf795c3bb6" kindref="member">SrgbGrayTex</ref><sp/>=<sp/>AssetDatabase.LoadAssetAtPath&lt;Texture2D&gt;($</highlight><highlight class="stringliteral">&quot;{AssetPath}/{SrgbGrayImageName}.png&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="18" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a3c84a56838d8cdaf0c6d1f21c66d9f36" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/>Texture2D<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a3c84a56838d8cdaf0c6d1f21c66d9f36" kindref="member">LinearGrayTex</ref><sp/>=<sp/>AssetDatabase.LoadAssetAtPath&lt;Texture2D&gt;($</highlight><highlight class="stringliteral">&quot;{AssetPath}/{LinearGrayImageName}.png&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="19" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a14877fb369f154a32e98e6a777d37252" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/>Texture2D<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a14877fb369f154a32e98e6a777d37252" kindref="member">NormalMapGrayTex</ref><sp/>=<sp/>AssetDatabase.LoadAssetAtPath&lt;Texture2D&gt;($</highlight><highlight class="stringliteral">&quot;{AssetPath}/{NormalMapGrayImageName}.png&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="20" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aea209db3e1a9801872094619b968faae" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/>Color32<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aea209db3e1a9801872094619b968faae" kindref="member">JustGray</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Color32(127,<sp/>127,<sp/>127,<sp/>255);</highlight></codeline>
<codeline lineno="21" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a92cff7a99408405a098d6e3fc060cb25" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/>Color32<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a92cff7a99408405a098d6e3fc060cb25" kindref="member">SrgbGrayInSrgb</ref><sp/>=<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aea209db3e1a9801872094619b968faae" kindref="member">JustGray</ref>;</highlight></codeline>
<codeline lineno="22" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a60b6ce90199ed29cfffc019193f543a4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/>Color32<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a60b6ce90199ed29cfffc019193f543a4" kindref="member">SrgbGrayInLinear</ref><sp/>=<sp/>((Color)<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a92cff7a99408405a098d6e3fc060cb25" kindref="member">SrgbGrayInSrgb</ref>).linear;</highlight></codeline>
<codeline lineno="23" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aebed2508cf844de6f3c4136293dac6c5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/>Color32<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aebed2508cf844de6f3c4136293dac6c5" kindref="member">LinearGrayInLinear</ref><sp/>=<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aea209db3e1a9801872094619b968faae" kindref="member">JustGray</ref>;</highlight></codeline>
<codeline lineno="24" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a6ff6be559c684012104fbf0cf1857d73" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/>Color32<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a6ff6be559c684012104fbf0cf1857d73" kindref="member">LinearGrayInSrgb</ref><sp/>=<sp/>((Color)<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aebed2508cf844de6f3c4136293dac6c5" kindref="member">LinearGrayInLinear</ref>).gamma;</highlight></codeline>
<codeline lineno="25" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ad24907b5b39248f8d588fc3c9b8453e8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>readonly<sp/>Color32<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ad24907b5b39248f8d588fc3c9b8453e8" kindref="member">NormalizedLinearGrayInLinear</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Color32(127,<sp/>127,<sp/>255,<sp/>255);</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[Test]</highlight></codeline>
<codeline lineno="28" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1abc9ae82e87f1aac19b054200fdfddb54" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1abc9ae82e87f1aac19b054200fdfddb54" kindref="member">InputAssetsRawImage</ref>()</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a92cff7a99408405a098d6e3fc060cb25" kindref="member">SrgbGrayInSrgb</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aa3f3bd98705bbd94721a13adf89e07dc" kindref="member">GetFirstPixelInTexture2D</ref>(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a998be8e79b0486cd23453daf795c3bb6" kindref="member">SrgbGrayTex</ref>));</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Image<sp/>color<sp/>space<sp/>is<sp/>sRGB<sp/>even<sp/>though<sp/>Texture<sp/>color<sp/>space<sp/>was<sp/>Linear.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a92cff7a99408405a098d6e3fc060cb25" kindref="member">SrgbGrayInSrgb</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aa3f3bd98705bbd94721a13adf89e07dc" kindref="member">GetFirstPixelInTexture2D</ref>(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a3c84a56838d8cdaf0c6d1f21c66d9f36" kindref="member">LinearGrayTex</ref>));</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[Test]</highlight></codeline>
<codeline lineno="37" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a23fbe359193329a921f7f4bbb95606ca" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a23fbe359193329a921f7f4bbb95606ca" kindref="member">CopyToSrgbRenderTexture</ref>()</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>srgbRt<sp/>=<sp/>RenderTexture.GetTemporary(4,<sp/>4,<sp/>0,<sp/>RenderTextureFormat.ARGB32,<sp/>RenderTextureReadWrite.sRGB);</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Graphics.Blit(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a998be8e79b0486cd23453daf795c3bb6" kindref="member">SrgbGrayTex</ref>,<sp/>srgbRt);</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a92cff7a99408405a098d6e3fc060cb25" kindref="member">SrgbGrayInSrgb</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ac223b183fb266d6722dd6995d8175003" kindref="member">GetFirstPixelInRenderTexture</ref>(srgbRt));</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Graphics.Blit(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a3c84a56838d8cdaf0c6d1f21c66d9f36" kindref="member">LinearGrayTex</ref>,<sp/>srgbRt);</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a6ff6be559c684012104fbf0cf1857d73" kindref="member">LinearGrayInSrgb</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ac223b183fb266d6722dd6995d8175003" kindref="member">GetFirstPixelInRenderTexture</ref>(srgbRt));</highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RenderTexture.ReleaseTemporary(srgbRt);</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[Test]</highlight></codeline>
<codeline lineno="51" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a27cbf3a55c0bd4f3f38485e01978e14d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a27cbf3a55c0bd4f3f38485e01978e14d" kindref="member">CopyToLinearRenderTexture</ref>()</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>linearRt<sp/>=<sp/>RenderTexture.GetTemporary(4,<sp/>4,<sp/>0,<sp/>RenderTextureFormat.ARGB32,<sp/>RenderTextureReadWrite.Linear);</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Graphics.Blit(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a998be8e79b0486cd23453daf795c3bb6" kindref="member">SrgbGrayTex</ref>,<sp/>linearRt);</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a60b6ce90199ed29cfffc019193f543a4" kindref="member">SrgbGrayInLinear</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ac223b183fb266d6722dd6995d8175003" kindref="member">GetFirstPixelInRenderTexture</ref>(linearRt));</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Graphics.Blit(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a3c84a56838d8cdaf0c6d1f21c66d9f36" kindref="member">LinearGrayTex</ref>,<sp/>linearRt);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aebed2508cf844de6f3c4136293dac6c5" kindref="member">LinearGrayInLinear</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ac223b183fb266d6722dd6995d8175003" kindref="member">GetFirstPixelInRenderTexture</ref>(linearRt));</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RenderTexture.ReleaseTemporary(linearRt);</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[Test]</highlight></codeline>
<codeline lineno="65" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a4105425f21a4c553f2634c29ceaac811" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a4105425f21a4c553f2634c29ceaac811" kindref="member">AssignSrgbImageToSrgbTextureProperty</ref>()</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>exportedTex<sp/>=<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a67ed798896c263bbef304951a3483de7" kindref="member">AssignTextureToMaterialPropertyAndExportAndExtract</ref>(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a998be8e79b0486cd23453daf795c3bb6" kindref="member">SrgbGrayTex</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1afce48a136028ab047e1ae993d40bbd91" kindref="member">SrgbGrayImageName</ref>,<sp/></highlight><highlight class="stringliteral">&quot;_MainTex&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a92cff7a99408405a098d6e3fc060cb25" kindref="member">SrgbGrayInSrgb</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aa3f3bd98705bbd94721a13adf89e07dc" kindref="member">GetFirstPixelInTexture2D</ref>(exportedTex));</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UnityEngine.Object.DestroyImmediate(exportedTex);</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[Test]</highlight></codeline>
<codeline lineno="73" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a12ef0e056a5701f20bea6b2169f50419" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a12ef0e056a5701f20bea6b2169f50419" kindref="member">AssignLinearImageToSrgbTextureProperty</ref>()</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>exportedTex<sp/>=<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a67ed798896c263bbef304951a3483de7" kindref="member">AssignTextureToMaterialPropertyAndExportAndExtract</ref>(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a3c84a56838d8cdaf0c6d1f21c66d9f36" kindref="member">LinearGrayTex</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ad92948acbb1b24bd65119782ae126e6b" kindref="member">LinearGrayImageName</ref>,<sp/></highlight><highlight class="stringliteral">&quot;_MainTex&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a6ff6be559c684012104fbf0cf1857d73" kindref="member">LinearGrayInSrgb</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aa3f3bd98705bbd94721a13adf89e07dc" kindref="member">GetFirstPixelInTexture2D</ref>(exportedTex));</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UnityEngine.Object.DestroyImmediate(exportedTex);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[Test]</highlight></codeline>
<codeline lineno="81" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a7a5d9cc095ea759b77eec7f484115708" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a7a5d9cc095ea759b77eec7f484115708" kindref="member">AssignSrgbImageToLinearTextureProperty</ref>()</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>exportedTex<sp/>=<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a67ed798896c263bbef304951a3483de7" kindref="member">AssignTextureToMaterialPropertyAndExportAndExtract</ref>(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a998be8e79b0486cd23453daf795c3bb6" kindref="member">SrgbGrayTex</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1afce48a136028ab047e1ae993d40bbd91" kindref="member">SrgbGrayImageName</ref>,<sp/></highlight><highlight class="stringliteral">&quot;_OcclusionMap&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>R<sp/>channel<sp/>is<sp/>occlusion<sp/>in<sp/>glTF<sp/>spec.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(SrgbGrayInLinear.r,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aa3f3bd98705bbd94721a13adf89e07dc" kindref="member">GetFirstPixelInTexture2D</ref>(exportedTex).r);</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UnityEngine.Object.DestroyImmediate(exportedTex);</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[Test]</highlight></codeline>
<codeline lineno="90" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a1d8bd668eadf19fb48a413dcc26d32e2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a1d8bd668eadf19fb48a413dcc26d32e2" kindref="member">AssignLinearImageToLinearTextureProperty</ref>()</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>exportedTex<sp/>=<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a67ed798896c263bbef304951a3483de7" kindref="member">AssignTextureToMaterialPropertyAndExportAndExtract</ref>(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a3c84a56838d8cdaf0c6d1f21c66d9f36" kindref="member">LinearGrayTex</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ad92948acbb1b24bd65119782ae126e6b" kindref="member">LinearGrayImageName</ref>,<sp/></highlight><highlight class="stringliteral">&quot;_OcclusionMap&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>R<sp/>channel<sp/>is<sp/>occlusion<sp/>in<sp/>glTF<sp/>spec.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(LinearGrayInLinear.r,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aa3f3bd98705bbd94721a13adf89e07dc" kindref="member">GetFirstPixelInTexture2D</ref>(exportedTex).r);</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UnityEngine.Object.DestroyImmediate(exportedTex);</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[Test]</highlight></codeline>
<codeline lineno="99" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a33eb6d17656e1273561f6aba813ad9ce" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a33eb6d17656e1273561f6aba813ad9ce" kindref="member">AssignLinearImageToNormalTextureProperty</ref>()</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>exportedTex<sp/>=<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a67ed798896c263bbef304951a3483de7" kindref="member">AssignTextureToMaterialPropertyAndExportAndExtract</ref>(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a3c84a56838d8cdaf0c6d1f21c66d9f36" kindref="member">LinearGrayTex</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ad92948acbb1b24bd65119782ae126e6b" kindref="member">LinearGrayImageName</ref>,<sp/></highlight><highlight class="stringliteral">&quot;_BumpMap&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ad24907b5b39248f8d588fc3c9b8453e8" kindref="member">NormalizedLinearGrayInLinear</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aa3f3bd98705bbd94721a13adf89e07dc" kindref="member">GetFirstPixelInTexture2D</ref>(exportedTex));</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>B<sp/>channel<sp/>is<sp/>different<sp/>from<sp/>127.<sp/>Because<sp/>it<sp/>will<sp/>be<sp/>normalized<sp/>as<sp/>normal<sp/>vector.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UnityEngine.Object.DestroyImmediate(exportedTex);</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[Test]</highlight></codeline>
<codeline lineno="108" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ad46e3ce14ebb1b007ed63c59b15ba55d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ad46e3ce14ebb1b007ed63c59b15ba55d" kindref="member">AssignLinearImageAsNormalMapSettingsToNormalTextureProperty</ref>()</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>exportedTex<sp/>=<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a67ed798896c263bbef304951a3483de7" kindref="member">AssignTextureToMaterialPropertyAndExportAndExtract</ref>(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a14877fb369f154a32e98e6a777d37252" kindref="member">NormalMapGrayTex</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a22213bc1a940926cdf1f226db635f975" kindref="member">NormalMapGrayImageName</ref>,<sp/></highlight><highlight class="stringliteral">&quot;_BumpMap&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(<ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ad24907b5b39248f8d588fc3c9b8453e8" kindref="member">NormalizedLinearGrayInLinear</ref>,<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aa3f3bd98705bbd94721a13adf89e07dc" kindref="member">GetFirstPixelInTexture2D</ref>(exportedTex));</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>B<sp/>channel<sp/>is<sp/>different<sp/>from<sp/>127.<sp/>Because<sp/>it<sp/>will<sp/>be<sp/>normalized<sp/>as<sp/>normal<sp/>vector.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UnityEngine.Object.DestroyImmediate(exportedTex);</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a67ed798896c263bbef304951a3483de7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>Texture2D<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1a67ed798896c263bbef304951a3483de7" kindref="member">AssignTextureToMaterialPropertyAndExportAndExtract</ref>(Texture2D<sp/>srcTex,<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>srcImageName,<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>propertyName)</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Prepare</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>root<sp/>=<sp/>GameObject.CreatePrimitive(PrimitiveType.Cube);</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>mat<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Material(Shader.Find(</highlight><highlight class="stringliteral">&quot;Standard&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mat.SetTexture(propertyName,<sp/>srcTex);</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>root.GetComponent&lt;MeshRenderer&gt;().sharedMaterial<sp/>=<sp/>mat;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Export<sp/>glTF</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>data<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_exporting_gltf_data" kindref="compound">ExportingGltfData</ref>();</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>(var<sp/>exporter<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1gltf_exporter" kindref="compound">gltfExporter</ref>(data,<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_uni_g_l_t_f_1_1_gltf_export_settings" kindref="compound">GltfExportSettings</ref></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>InverseAxis<sp/>=<sp/>Axes.X,</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ExportOnlyBlendShapePosition<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UseSparseAccessorForMorphTarget<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DivideVertexBuffer<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}))</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exporter.Prepare(root);</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exporter.Export(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_v_r_m_shaders_1_1_editor_texture_serializer" kindref="compound">EditorTextureSerializer</ref>());</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>gltf<sp/>=<sp/>data.GLTF;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(1,<sp/>gltf.images.Count);</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>exportedImage<sp/>=<sp/>gltf.images[0];</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(</highlight><highlight class="stringliteral">&quot;image/png&quot;</highlight><highlight class="normal">,<sp/>exportedImage.mimeType);</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(srcImageName,<sp/>exportedImage.name);</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UnityEngine.Object.DestroyImmediate(mat);</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UnityEngine.Object.DestroyImmediate(root);</highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>parsed<sp/>=<sp/>GltfData.CreateFromGltfDataForTest(gltf,<sp/>data.BinBytes);</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Extract<sp/>Image<sp/>to<sp/>Texture2D</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>exportedBytes<sp/>=<sp/>parsed.GetBytesFromBufferView(exportedImage.bufferView).ToArray();</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>exportedTexture<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Texture2D(2,<sp/>2,<sp/>TextureFormat.ARGB32,<sp/>mipChain:<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>linear:<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.IsTrue(exportedTexture.LoadImage(exportedBytes));<sp/></highlight><highlight class="comment">//<sp/>Always<sp/>true<sp/>?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(srcTex.width,<sp/>exportedTexture.width);</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Assert.AreEqual(srcTex.height,<sp/>exportedTexture.height);</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>exportedTexture;</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight></codeline>
<codeline lineno="158" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aa3f3bd98705bbd94721a13adf89e07dc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>Color32<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aa3f3bd98705bbd94721a13adf89e07dc" kindref="member">GetFirstPixelInTexture2D</ref>(Texture2D<sp/>tex)</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>tex.GetPixels32()[0];</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight></codeline>
<codeline lineno="163" refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ac223b183fb266d6722dd6995d8175003" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>Color32<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1ac223b183fb266d6722dd6995d8175003" kindref="member">GetFirstPixelInRenderTexture</ref>(RenderTexture<sp/>rt)</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>function<sp/>copies<sp/>memory<sp/>values<sp/>and<sp/>just<sp/>read,<sp/>so<sp/>Texture2D&apos;s<sp/>color<sp/>space<sp/>is<sp/>not<sp/>important.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>srgbTex<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Texture2D(rt.width,<sp/>rt.height,<sp/>TextureFormat.ARGB32,<sp/>mipChain:<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>linear:<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RenderTexture.active<sp/>=<sp/>rt;</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>srgbTex.ReadPixels(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Rect(0,<sp/>0,<sp/>rt.width,<sp/>rt.height),<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>srgbTex.Apply();</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RenderTexture.active<sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>pixel<sp/>=<sp/><ref refid="class_uni_g_l_t_f_1_1_editor_texture_serializer_tests_1aa3f3bd98705bbd94721a13adf89e07dc" kindref="member">GetFirstPixelInTexture2D</ref>(srgbTex);</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UnityEngine.Object.DestroyImmediate(srgbTex);</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pixel;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="176"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="C:/Users/Noguc/Documents/Team2-4C/Assets/player/UniGLTF/Tests/UniGLTF/EditorTextureSerializerTests.cs"/>
  </compounddef>
</doxygen>
